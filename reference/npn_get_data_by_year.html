<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get Data By Year — npn_get_data_by_year • rnpn</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get Data By Year — npn_get_data_by_year"><meta property="og:description" content="Utility function to chain multiple requests to npn_get_data for requests
where data should only be retrieved on an annual basis, or otherwise
automatically be delineated in some way. Results in a data table that's a
combined set of the results from each request to the data service."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rnpn</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/I_introduction.html">I. Introduction</a>
    </li>
    <li>
      <a href="../articles/II_status_intensity.html">II. Status and Intensity Data</a>
    </li>
    <li>
      <a href="../articles/III_individual_phenometrics.html">III. Individual Phenometrics</a>
    </li>
    <li>
      <a href="../articles/IV_site_phenometrics.html">IV. Site Phenometrics</a>
    </li>
    <li>
      <a href="../articles/V_magnitude_phenometrics.html">V. Magnitude Phenometrics</a>
    </li>
    <li>
      <a href="../articles/VI_geospatial.html">VI. USA-NPN Geospatial Data</a>
    </li>
    <li>
      <a href="../articles/VII_combine_raster_point.html">VII. Putting It All Together</a>
    </li>
    <li>
      <a href="../articles/VIII_data_cleaning.html">VIII. Data Cleaning</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/usa-npn/rnpn/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get Data By Year</h1>
    <small class="dont-index">Source: <a href="https://github.com/usa-npn/rnpn/blob/master/R/npn_data_download.R" class="external-link"><code>R/npn_data_download.R</code></a></small>
    <div class="hidden name"><code>npn_get_data_by_year.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Utility function to chain multiple requests to <a href="npn_get_data.html">npn_get_data</a> for requests
where data should only be retrieved on an annual basis, or otherwise
automatically be delineated in some way. Results in a data table that's a
combined set of the results from each request to the data service.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">npn_get_data_by_year</span><span class="op">(</span></span>
<span>  <span class="va">endpoint</span>,</span>
<span>  <span class="va">query</span>,</span>
<span>  <span class="va">years</span>,</span>
<span>  download_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  six_leaf_layer <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  six_bloom_layer <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  agdd_layer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  six_sub_model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  additional_layers <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-endpoint">endpoint<a class="anchor" aria-label="anchor" href="#arg-endpoint"></a></dt>
<dd><p>String, the endpoint to query.</p></dd>


<dt id="arg-query">query<a class="anchor" aria-label="anchor" href="#arg-query"></a></dt>
<dd><p>Base query string to use. This includes all the user selected
parameters but doesn't include start/end date which will be automatically
generated and added.</p></dd>


<dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p>Character vector; the years for which to retrieve data. There
will be one request to the service for each year</p></dd>


<dt id="arg-download-path">download_path<a class="anchor" aria-label="anchor" href="#arg-download-path"></a></dt>
<dd><p>Character, optional file path to the file for which to
output the results.</p></dd>


<dt id="arg-six-leaf-layer">six_leaf_layer<a class="anchor" aria-label="anchor" href="#arg-six-leaf-layer"></a></dt>
<dd><p>Boolean value when set to <code>TRUE</code> will attempt to
resolve the date of the observation to a spring index, leafing value for
the location at which the observations was taken.</p></dd>


<dt id="arg-six-bloom-layer">six_bloom_layer<a class="anchor" aria-label="anchor" href="#arg-six-bloom-layer"></a></dt>
<dd><p>Boolean value when set to <code>TRUE</code> will attempt to
resolve the date of the observation to a spring index, bloom value for the
location at which the observations was taken.</p></dd>


<dt id="arg-agdd-layer">agdd_layer<a class="anchor" aria-label="anchor" href="#arg-agdd-layer"></a></dt>
<dd><p>Numeric value, accepts <code>32</code> or <code>50</code>. When set, the results
will attempt to resolve the date of the observation to an AGDD value for
the location; the <code>32</code> or <code>50</code> represents the base value of the AGDD value
returned. All AGDD values are based on a January 1st start date of the year
in which the observation was taken.</p></dd>


<dt id="arg-six-sub-model">six_sub_model<a class="anchor" aria-label="anchor" href="#arg-six-sub-model"></a></dt>
<dd><p>Affects the results of the six layers returned. Can be
used to specify one of three submodels used to calculate the spring index
values. Thus setting this field will change the results of <code>six_leaf_layer</code>
and <code>six_bloom_layer</code>. Valid values include: <code>'lilac'</code>, <code>'zabelli'</code> and
<code>'arnoldred'</code>. For more information see the NPN's Spring Index Maps
documentation: <a href="https://www.usanpn.org/data/maps/spring" class="external-link">https://www.usanpn.org/data/maps/spring</a>.</p></dd>


<dt id="arg-additional-layers">additional_layers<a class="anchor" aria-label="anchor" href="#arg-additional-layers"></a></dt>
<dd><p>Data frame with first column named <code>name</code> and
containing the names of the layer for which to retrieve data and the second
column named <code>param</code> and containing string representations of the
time/elevation subset parameter to use. This variable can be used to append
additional geospatial layer data fields to the results, such that the date
of observation in each row will resolve to a value from the specified
layers, given the location of the observation.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A tibble combining each requests results from the service. If
<code>download_path</code> is specified, the file path is returned instead.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">endpoint</span> <span class="op">&lt;-</span> <span class="st">"/observations/getObservations.ndjson?"</span></span></span>
<span class="r-in"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  request_src <span class="op">=</span> <span class="st">"Unit%20Test"</span>,</span></span>
<span class="r-in"><span>  climate_data <span class="op">=</span> <span class="st">"0"</span>,</span></span>
<span class="r-in"><span>  `species_id[1]` <span class="op">=</span> <span class="st">"6"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">npn_get_data_by_year</span><span class="op">(</span>endpoint <span class="op">=</span> <span class="va">endpoint</span>,</span></span>
<span class="r-in"><span>                     query <span class="op">=</span> <span class="va">query</span>,</span></span>
<span class="r-in"><span>                     years <span class="op">=</span> <span class="fl">2013</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jeff Switzer, Scott Chamberlain, Lee Marsh, Kevin Wong, Eric R Scott.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

